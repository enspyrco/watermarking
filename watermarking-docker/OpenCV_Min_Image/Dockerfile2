FROM opencvmin-installed

# remove the opencv install files 
WORKDIR /
RUN rm -rf /tmp/*

# gsutil 

# Install gsutil with Python package index, as described in: 
# https://cloud.google.com/storage/docs/gsutil_install#linux 

# Several packages are required to successfully install gsutil from PyPI 
RUN apt-get -y install python-setuptools libffi-dev libssl-dev python-pip

RUN pip install gsutil

COPY WatermarkingPrintAndScan-320faf6a7881.p12 /keys/WatermarkingPrintAndScan-320faf6a7881.p12

# boost & npm 

# install boost 
RUN apt-get install -y libboost-all-dev

# install nodejs and npm
RUN apt-get install -y nodejs npm 

# firebase server sdk 

# copy the json key 
COPY WatermarkingPrintAndScan-8705059a4ba1.json /keys/WatermarkingPrintAndScan-8705059a4ba1.json

# get the firebase server sdk installed 
COPY package.json /package.json
RUN npm install

